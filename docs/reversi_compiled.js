var y="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,h){a!=Array.prototype&&a!=Object.prototype&&(a[b]=h.value)},B="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function C(a){if(a){for(var b=B,h=["Array","prototype","fill"],f=0;f<h.length-1;f++){var g=h[f];g in b||(b[g]={});b=b[g]}h=h[h.length-1];f=b[h];a=a(f);a!=f&&null!=a&&y(b,h,{configurable:!0,writable:!0,value:a})}}
C(function(a){return a?a:function(a,h,f){var b=this.length||0;0>h&&(h=Math.max(0,b+h));if(null==f||f>b)f=b;f=Number(f);0>f&&(f=Math.max(0,b+f));for(h=Number(h||0);h<f;h++)this[h]=a;return this}});function D(a){a=~a&a-1;a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24}
function E(a,b,h,f,g){var n=~(a|h),r=~(b|f),m=h&2122219134,c=f&2122219134;var q=a<<1;var x=b<<1;var d=b>>>1&c;d|=d>>>1&c;d|=d>>>1&c;d|=d>>>1&c;d|=d>>>1&c;x=c+x&r&~x|(d|d>>>1&c)>>>1&r;var e=a>>>1&m;e|=e>>>1&m;e|=e>>>1&m;e|=e>>>1&m;e|=e>>>1&m;q=m+q&n&~q|(e|e>>>1&m)>>>1&n;m=h&16777215;c=f&4294967040;d=b<<8&c;d|=d<<8&c;d|=d<<8&c;e=(a<<8|(d|b)>>>24)&m;e|=e<<8&m;q|=((e|e<<8&m)<<8|d>>>24)&n;x|=d<<8&r;e=a>>>8&m;e|=e>>>8&m;e|=e>>>8&m;d=(b>>>8|(e|a)<<24)&c;d|=d>>>8&c;q|=e>>>8&n;x|=((d|d>>>8&c)>>>8|e<<24)&r;
m=h&8289918;c=f&2122219008;d=b<<9&c;d|=d<<9&c;d|=d<<9&c;e=(a<<9|(d|b)>>>23)&m;e|=e<<9&m;q|=((e|e<<9&m)<<9|d>>>23)&n;x|=d<<9&r;e=a>>>9&m;e|=e>>>9&m;e|=e>>>9&m;d=(b>>>9|(e|a)<<23)&c;d|=d>>>9&c;q|=e>>>9&n;x|=((d|d>>>9&c)>>>9|e<<23)&r;d=b<<7&c;d|=d<<7&c;d|=d<<7&c;e=(a<<7|(d|b)>>>25)&m;e|=e<<7&m;q|=((e|e<<7&m)<<7|d>>>25)&n;x|=d<<7&r;e=a>>>7&m;e|=e>>>7&m;e|=e>>>7&m;d=(b>>>7|(e|a)<<25)&c;d|=d>>>7&c;g.o=q|e>>>7&n;g.m=x|((d|d>>>7&c)>>>7|e<<25)&r}function F(){this.a=[0,0]}
F.prototype.set=function(a,b){this.a=[b,a];return this};function G(a){var b=a.a[0];a=a.a[1];b-=b>>>1&1431655765;a-=a>>>1&1431655765;b=(b&858993459)+((b&3435973836)>>>2)+((a&858993459)+((a&3435973836)>>>2));return 16843009*((b&252645135)+((b&4042322160)>>>4))>>>24}function H(a,b){if("function"===typeof b){for(var h=a.a[0];0!==h;h&=h-1){var f=D(h);b(f%8,f/8|0)}for(a=a.a[1];0!==a;a&=a-1)h=D(a)+32,b(h%8,h/8|0)}}function I(a){return(new F).set(a.a[1],a.a[0])}
F.prototype.and=function(a){if(a instanceof F){var b=I(this);b.a[1]&=a.a[1];b.a[0]&=a.a[0];return b}throw Error("bb\u304cBitboard\u3067\u306f\u3042\u308a\u307e\u305b\u3093");};F.prototype.xor=function(a){if(a instanceof F){var b=I(this);b.a[1]^=a.a[1];b.a[0]^=a.a[0];return b}throw Error("bb\u304cBitboard\u3067\u306f\u3042\u308a\u307e\u305b\u3093");};
F.prototype.or=function(a){if(a instanceof F){var b=I(this);b.a[1]|=a.a[1];b.a[0]|=a.a[0];return b}throw Error("bb\u304cBitboard\u3067\u306f\u3042\u308a\u307e\u305b\u3093");};F.prototype.test=function(a){return 0>a||64<=a?0:this.a[a>>>5]>>>(a&31)&1};function J(a){return 0===a.a[1]&&0===a.a[0]}function K(a){return 0>a||64<=a?new F:32>a?(new F).set(0,1<<a):(new F).set(1<<a-32,0)};function L(a,b){if(!(a instanceof F))throw new TypeError("flip_bb\u306fBitboard\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059");this.i=a;this.v=b}function M(){this.c=0;this.l="";this.b=[new F,new F];this.f=new F;this.g=[];this.h=[];this.B=function(){};this.A=function(){}}function N(a){a.c=0;a.l="";a.b[0].set(8,268435456);a.b[1].set(16,134217728);a.f.set(0,0);O(a);a.g.length=a.h.length=0}
function O(a){var b={},h=a.b[a.c],f=a.b[a.c^1];E(h.a[1],h.a[0],f.a[1],f.a[0],b);a.f.set(b.o,b.m);J(a.f)&&(E(f.a[1],f.a[0],h.a[1],h.a[0],b),a.f.set(b.o,b.m),J(a.f)?a.A():(a.c^=1,a.g.unshift(new L(new F,-1)),a.B()))}
function P(a,b,h){if(a.f.test(b+8*h)){var f=a.c,g=a.c^1;a.h.length=0;var n=a.b[f],r=a.b[g],m=b+8*h;if(32>m){var c=n.a[1];var q=n.a[0];var x=r.a[1],d=r.a[0],e=1<<m,v=x&2122219134,u=d&2122219134;var t=254*e;var k=(u|~t)+1&t&q;t&=k-((k|-k)>>>31);k=e<<9&u;k|=k<<9&u;k|=k<<9&u;var p=(k|e)>>>23&v;p|=p<<9&v;p|=p<<9&v;var w=(p<<9|k>>>23)&c,A=k<<9&q,z=w|A;z=(z|-z)>>31;var l=0|p&w+(z+((A|-A)>>>31));t|=k&A+z;k=e<<8&d;k|=k<<8&d;k|=k<<8&d;p=(k|e)>>>24&x;p|=p<<8&x;p|=p<<8&x;w=(p<<8|k>>>24)&c;A=k<<8&q;z=w|A;z=(z|
-z)>>31;l|=p&w+(z+((A|-A)>>>31));t|=k&A+z;k=e<<7&u;k|=k<<7&u;k|=k<<7&u;p=(k|e)>>>25&v;p|=p<<7&v;p|=p<<7&v;w=(p<<7|k>>>25)&c;A=k<<7&q;z=w|A;z=(z|-z)>>31;t|=k&A+z;k=e>>>1&u;k|=k>>>1&u;k|=k>>>1&u;k|=k>>>1&u;k|=k>>>1&u;k|=k>>>1&u;t|=k&-(k>>>1&q);k=e>>>9&u;k|=k>>>9&u;t|=k&-(k>>>9&q);k=e>>>8&d;k|=k>>>8&d;t|=k&-(k>>>8&q);k=e>>>7&u;k|=k>>>7&u;c=l|p&w+(z+((A|-A)>>>31));q=t|k&-(k>>>7&q)}else q=n.a[1],k=n.a[0],c=r.a[1],x=r.a[0],d=1<<m-32,v=c&2122219134,u=x&2122219134,t=254*d,l=(v|~t)+1&t&q,e=l-((l|-l)>>>31)&
t,t=134480384*d,l=(v|~t)+1&t&q,e|=l-((l|-l)>>>31)&t,t=16843008*d,l=(c|~t)+1&t&q,e|=l-((l|-l)>>>31)&t,t=2113664*d,l=(v|~t)+1&t&q,e|=l-((l|-l)>>>31)&t,l=d>>>1&v,l|=l>>>1&v,l|=l>>>1&v,l|=l>>>1&v,l|=l>>>1&v,l|=l>>>1&v,e|=l&-(l>>>1&q),l=d>>>9&v,l|=l>>>9&v,l|=l>>>9&v,p=(l|d)<<23&u,p|=p>>>9&u,p|=p>>>9&u,w=(p>>>9|l<<23)&k,e|=l&~(l>>>9&q)+((w|-w)>>>31^1),t=0|p&-w,l=d>>>8&c,l|=l>>>8&c,l|=l>>>8&c,p=(l|d)<<24&x,p|=p>>>8&x,p|=p>>>8&x,w=(p>>>8|l<<24)&k,e|=l&~(l>>>8&q)+((w|-w)>>>31^1),t|=p&-w,l=d>>>7&v,l|=l>>>7&
v,l|=l>>>7&v,p=(l|d)<<25&u,p|=p>>>7&u,p|=p>>>7&u,w=(p>>>7|l<<25)&k,c=e|=l&~(l>>>7&q)+((w|-w)>>>31^1),q=t|p&-w;q=(new F).set(c,q);a.b[f]=n.xor(q).xor(K(m));a.b[g]=r.xor(q);a.g.unshift(new L(q,m));a.c^=1;O(a);a.l+="abcdefgh"[b]+(h+1)}}function Q(a,b){"function"===typeof b&&(a.B=b)}function R(a,b){"function"===typeof b&&(a.A=b)};var S=function(){function a(){}function b(){}function h(a,f){g.scale(2,2);g.clearRect(0,0,n,n);g.fillStyle="#a52250";g.fillRect(0,0,n,n);g.fillStyle="#000000";for(var c=0;c<=n;c+=n/8)g.beginPath(),g.moveTo(c,0),g.lineTo(c,n),g.stroke();for(c=0;c<=n;c+=n/8)g.beginPath(),g.moveTo(0,c),g.lineTo(n,c),g.stroke();g.beginPath();g.arc(2*r,2*r,3,0,2*Math.PI,!0);g.fill();g.beginPath();g.arc(6*r,2*r,3,0,2*Math.PI,!0);g.fill();g.beginPath();g.arc(2*r,6*r,3,0,2*Math.PI,!0);g.fill();g.beginPath();g.arc(6*r,6*r,
3,0,2*Math.PI,!0);g.fill();g.scale(.5,.5);c=a.b[0];var d=a.b[1],e=a.g.length?a.g[0]:new L(new F,-1),q=e.i;H(c,function(a,c){f&&q.test(a+8*c)?g.drawImage(m,80*(7-f+1),80,80,80,80*a,80*c,80,80):g.drawImage(m,0,0,80,80,80*a,80*c,80,80)});H(d,function(a,c){f&&q.test(a+8*c)?g.drawImage(m,80*(7-f+1),0,80,80,80*a,80*c,80,80):g.drawImage(m,0,80,80,80,80*a,80*c,80,80)});0<f?setTimeout(function(){return h(a,f-1)},15):(d=e.v,c=d%8,d=d/8|0,g.scale(2,2),g.fillStyle="#ff0037",g.shadowOffsetX=0,g.shadowOffsetY=
0,g.shadowBlur=0,g.beginPath(),g.arc(c*r+r/2,d*r+r/2,3,0,2*Math.PI,!0),g.fill(),g.scale(.5,.5),b())}var f=document.getElementById("canvas-gameboard"),g=f.getContext("2d"),n=f.clientWidth,r=Math.floor(n/8),m=new Image;m.src="img/stones_80.png";f.addEventListener("mouseup",function(c){var b=f.getBoundingClientRect();a(Math.floor((c.x-b.left)/r),Math.floor((c.y-b.top)/r))});return{D:function(a){a instanceof M&&h(a,7)},C:function(c){"function"===typeof c&&(a=c)},F:function(a){"function"===typeof a&&(b=
a)}}}();var T=function(){function a(a){a=['importScripts("'+window.location.href.replace(/\\/g,"/").replace(/\/[^\/]*$/,"/")+a+'");'];a=window.URL.createObjectURL(new Blob(a,{type:"text/javascript"}));return new Worker(a)}return{w:function(b,h){if(44>G(b.b[0])+G(b.b[1])){var f=a("engine_compiled.js");f.addEventListener("message",function(a){h(a.data)})}else f=a("solver_compiled.js"),f.addEventListener("message",function(a){h(a.data)});f.postMessage({p1:b.b[b.c].a[1],p0:b.b[b.c].a[0],o1:b.b[b.c^1].a[1],o0:b.b[b.c^
1].a[0]})}}}();
!function(){function a(){S.D(f);r.value=f.l;n[0].update();n[1].update()}function b(a){var c=a.result;c=a.exact?0<c?c+"\u77f3\u5dee\u3067\u50d5\u306e\u52dd\u3061\u3067\u304a\u307e\u3093\u304c\u306a\u3002":0>c?-c+"\u77f3\u5dee\u3067\u8ca0\u3051\u308b...\u5999\u3060\u306a":"\u5f15\u304d\u5206\u3051\u3063\u3066\u5206\u304b\u3063\u3066\u3057\u3082\u305f\u3093\u3067\u3093\u304c\u306a":100<c?"\u771f\u5b9f\u306f\u3044\u3064\u3082\u3072\u3068\u3064\uff01":60<c?"\u8b0e\u306f\u5168\u3066\u89e3\u3051\u305f\uff01":20<
c?"\u8ff7\u5bae\u306a\u3057\u306e\u540d\u63a2\u5075\u3067\u3059":10<c?"\uff08\u30cb\u30f3\u30de\u30ea\uff09":-10<c?"\u3044\u3044\u8a66\u5408\u3060\u306d\u30fc\uff01":-20<c?"\u3042\u308c\u308c\u30fc\u3063....":-60<c?"\u304a\u3063\u304b\u3057\u3044\u305e\uff5e\uff1f\uff1f\uff1f":-100<c?"\u30de\u30ba\u30a4\u306a...":"\u30d0\u30fc\u30ed\u30fc\u3001\u3082\u3063\u3068\u624b\u52a0\u6e1b\u3057\u3066\u304f\u3060\u3055\u3044";c=c+"\n"+((a.nodes/a.elapsed*1E3|0)+" nodes/s");n[f.c].j(c);h(a.x,a.y)}function h(m,
c){f.f.test(m+8*c)&&(P(f,m,c),a(),n[f.c].type===g.s&&(n[f.c].j("\u8003\u3048\u4e2d..."),T.w(f,b)))}var f=new M;Q(f,function(){alert("pass!")});R(f,function(){var a=G(f.b[0]),c=G(f.b[1]);alert("\u9ed2 "+a+"\u77f3\u3001\u767d "+c+"\u77f3\u3067"+(a>c?"\u9ed2\u306e\u52dd\u3061":c>a?"\u767d\u306e\u52dd\u3061":"\u5f15\u304d\u5206\u3051")+"\u3067\u3059\uff01")});var g={u:0,s:1},n=function(){return[function(){var a=document.getElementById("count1"),c=document.getElementById("message1");return{type:g.u,update:function(){a.innerHTML=
G(f.b[0])},j:function(a){c.innerHTML=a||""}}}(),function(){var a=document.getElementById("count2"),c=document.getElementById("message2");return{type:g.u,update:function(){a.innerHTML=G(f.b[1])},j:function(a){c.innerHTML=a||""}}}()]}(),r=document.getElementById("recode-str");a();S.C(function(a,c){n[f.c].type===g.u&&h(a,c)});this.startGame=function(){N(f);var m=+document.getElementById("type2").value;n[0].type=+document.getElementById("type1").value;n[1].type=m;a();n[f.c].type===g.s&&(n[f.c].j("\u8003\u3048\u4e2d..."),
T.w(f,b))};this.loadRecode=function(){var m=f,c=r.value;if(c){N(m);c=(c.toString()||"").toLowerCase();for(var q=c.length,h=0;h<q&&h+1<q;h+=2){var d="abcdefgh".indexOf(c[h]),e="12345678".indexOf(c[h+1]);if(-1===d||-1===e)break;if(!m.f.test(d+8*e))break;P(m,d,e)}}m=+document.getElementById("type2").value;n[0].type=+document.getElementById("type1").value;n[1].type=m;a();n[f.c].type===g.s&&(n[f.c].j("\u8003\u3048\u4e2d..."),T.w(f,b))};this.undo=function(){var b=f;if(0!==b.g.length){var c=b.g.shift();
b.c^=1;var g=b.c,h=b.c^1;b.b[g]=b.b[g].xor(c.i).xor(K(c.v));b.b[h]=b.b[h].xor(c.i);b.h.unshift(c);c={};E(b.b[g].a[1],b.b[g].a[0],b.b[h].a[1],b.b[h].a[0],c);b.f.set(c.o,c.m)}a()};this.redo=function(){var b=f;if(0!==b.h.length){var c=b.h.shift();b.c^=1;var g=b.c,h=b.c^1;b.b[h]=b.b[h].xor(c.i).xor(K(c.v));b.b[g]=b.b[g].xor(c.i);b.g.unshift(c);c={};E(b.b[g].a[1],b.b[g].a[0],b.b[h].a[1],b.b[h].a[0],c);b.f.set(c.o,c.m)}a()}}();
